{% extends "website/base.html" %}

{% load static %}

{% load bootstrap3 %}

{% block title %}Wetsvoorstellen - Tweede Kamer {{ block.super }}{% endblock %}

{% load bootstrap_pagination %}

{% block content %}

<div class="row pt-3">
  <!--<div class="col-sm-12">-->
    <!--<div class="card card-accent-primary" align="center">-->
      <!--<div class="card-body p-2" align="center">-->
        <!--<span class="h4 text-primary">Wetsvoorstellen</span>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
</div>

<div class="row">
  <div class="col-sm-12">

    <div class="card card-accent-success mb-2">
      <div class="card-header p-2 text-center">
        <span class="h4 text-primary">Wetsvoorstellen</span>
      </div>
      <div class="card-body p-3">
        <form action="" method="get">

          <div class="row">
            <div class="col-sm-4 col-lg-4 col-xxl-2 pb-2">
              <span class="h6 text-primary">Titel</span>
              {% bootstrap_field filter.form.title bound_css_class='m-0' show_label=False show_help=False %}
            </div>

            <div class="col-sm-4 col-lg-4 col-xxl-2 pb-2">
              <span class="h6 text-primary">Dossier nr.</span>
              {% bootstrap_field filter.form.dossier_id bound_css_class='m-0' show_label=False show_help=False %}
            </div>

            <div class="col-sm-4 col-lg-4 col-xxl-2 pb-2">
              <span class="h6 text-primary">Status</span>
              {% bootstrap_field filter.form.status bound_css_class='m-0' show_label=False show_help=False %}
            </div>

            <div class="col-sm-6 col-lg-6 col-xxl-3 pb-2">
              <span class="h6 text-primary">Betrokkenen</span>
              {% bootstrap_field filter.form.submitter bound_css_class='m-0' show_label=False show_help=False %}
              {{ filter.form.media }}
            </div>

            <div class="col-sm-6 col-lg-6 col-xxl-3 pb-2">
              <span class="h6 text-primary">Indiener</span>
              {% bootstrap_field filter.form.wetsvoorstel_submitter bound_css_class='m-0' show_label=False show_help=False %}
              {{ filter.form.media }}
            </div>

            <div class="col-sm-12">
              <span class="float-right">
                <button class="btn btn-primary" type="submit">Zoek</button>
              </span>
              <span class="float-left h6">
                <a class="collapse-filter" data-toggle="collapse" href="#collapse-category-filter" aria-expanded="false" aria-controls="collapse-category-filter">
                  <i class="fa fa-chevron-right"></i> Onderwerpen
                </a>
              </span>
            </div>

            <div class="col-sm-12">
              <div class="collapse" id="collapse-category-filter">
                <div class="card card-block">
                  {% bootstrap_field filter.form.categories size='medium' field_class='category-filter-checkboxes text-primary' bound_css_class='' show_label=False show_help=False %}
                </div>
              </div>
              <script type="text/javascript">
                $('.collapse').on('show.bs.collapse', function() {
                  $(this).parent().find(".fa-chevron-right").removeClass("fa-chevron-right").addClass("fa-chevron-down");
                }).on('hide.bs.collapse', function() {
                  $(this).parent().find(".fa-chevron-down").removeClass("fa-chevron-down").addClass("fa-chevron-right");
                });

                if ($(".checkbox input").is(":checked")) { // checked
                  // console.log('at least one category is checked');
                  $("#collapse-category-filter").addClass("in");
                  $("#collapse-category-filter").parent().find(".fa-chevron-right").removeClass("fa-chevron-right").addClass("fa-chevron-down");;
                }
              </script>
            </div>
          </div>

        </form>
      </div>
    </div>

  </div>
</div>

<div class="card p-0 mb-2">
  <div class="card-body p-2">
    <span class="font-sm font-weight-bold">
      {% if n_results == 0 %}
        geen wetsvoorstellen
      {% elif n_results == 1 %}
        1 wetsvoorstel
      {% else %}
        {{ n_results }} wetsvoorstellen
      {% endif %}
        gevonden
    </span>
  </div>
</div>

{% if dossiers_voted %}
<div class="row">
  <div class="col-12">
    <div class="card card-accent-primary p-0 mt-1 mb-2">
      <div class="card-body p-2">
        <span class="font-weight-bold">Recent behandeld</span>
      </div>
    </div>
  </div>

  {% for dossier in dossiers_voted %}
  <div class="col-12">
    {% include "document/items/dossier_tile.html" %}
  </div>

  {% if forloop.counter|divisibleby:2 %}
  <div class="clearfix"></div>
  {% endif %}

  {% endfor %}
</div>
<hr class="hr-small"/>
{% endif %}

{% if dossiers_voted %}
<div class="row">
  <div class="col-12">
    <div class="card card-accent-primary p-0 mt-1 mb-2">
      <div class="card-body p-2">
        <span class="font-weight-bold">Alle</span>
      </div>
    </div>
  </div>
</div>
{% else %}
<hr/>
{% endif %}

<div class="row">
  {% for dossier in dossiers %}
  <div class="col-xl-12 col-xxl-6">
    {% include "document/items/dossier_tile.html" %}
  </div>

  {% if forloop.counter|divisibleby:2 %}
  <div class="clearfix"></div>
  {% endif %}

  {% endfor %}
</div>

<div class="row" align="center">{% bootstrap_paginate dossiers range=10 show_prev_next="true" show_first_last="true" %}</div>

{% endblock %}
